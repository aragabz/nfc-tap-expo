# Implementation Plan: Mobile App Foundation

**Branch**: `002-mobile-app-shell` | **Date**: 2026-02-09 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/002-mobile-app-shell/spec.md`

## Summary

Implement a production-ready mobile app shell for `digital-business-cards` including a swipeable onboarding flow, Azure Active Directory SSO, and a tab-based navigation structure with a Profile screen. The solution will leverage Expo Router for navigation and standard Expo libraries for persistence and authentication.

## Technical Context

**Language/Version**: TypeScript 5.9  
**Primary Dependencies**: Expo 54, React Native 0.81, Expo Router 6, @react-native-async-storage/async-storage, expo-auth-session (Azure AD SSO), expo-secure-store (token storage)  
**Storage**: AsyncStorage (for onboarding state and profile cache), SecureStore (for auth tokens)  
**Testing**: Jest + @testing-library/react-native  
**Target Platform**: iOS and Android (via Expo)
**Project Type**: mobile  
**Performance Goals**: 60fps for onboarding transitions, <1s app startup to initial screen, <500ms for profile data rendering  
**Constraints**: Production-ready UX, clean architecture, deterministic navigation state  
**Scale/Scope**: Initial shell with Onboarding (3 screens), Login, and 2-3 main tabs.

## Constitution Check

_GATE: Must pass before Phase 0 research. Re-check after Phase 1 design._

- [x] **Strict Typing**: Use TypeScript interfaces for UserProfile and AuthSession.
- [x] **Testing Strategy**: Unit tests for auth logic and storage hooks.
- [x] **UX Consistency**: Use platform-specific UI patterns for iOS and Android.
- [x] **Performance**: Optimize onboarding animations with Reanimated.

## Project Structure

### Documentation (this feature)

```text
specs/002-mobile-app-shell/
├── plan.md              # This file
├── research.md          # Phase 0 output
├── data-model.md        # Phase 1 output
├── quickstart.md        # Phase 1 output
├── contracts/           # Phase 1 output
└── tasks.md             # Phase 2 output (generated by /speckit.tasks)
```

### Source Code (repository root)

```text
src/
├── app/
│   ├── (auth)/          # Authentication & Onboarding flow
│   │   ├── onboarding.tsx
│   │   └── login.tsx
│   ├── (tabs)/          # Main application tabs
│   │   ├── index.tsx    # Home
│   │   ├── profile.tsx  # Profile
│   │   └── _layout.tsx
│   ├── _layout.tsx      # Root layout with Auth Provider
├── components/
│   ├── onboarding/      # Onboarding components
│   └── profile/         # Profile screen components
├── hooks/
│   ├── use-auth.ts      # Global auth state hook
│   └── use-onboarding.ts# Onboarding state hook
├── services/
│   ├── auth.ts          # Azure AD SSO logic
│   └── storage.ts       # Storage abstraction
└── types/
    └── auth.ts          # Auth related types
```

**Structure Decision**: Single project structure following Expo Router conventions using `(auth)` and `(tabs)` groups to manage navigation state.

## Complexity Tracking

_No violations identified._
